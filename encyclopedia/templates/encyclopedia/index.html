{% extends "encyclopedia/layout.html" %}

{% block title %}Library{% endblock %}

{% block body %}
<section class="hero-block">
    <div>
        <p class="eyebrow">Knowledge Library</p>
        <h1>Explore all entries</h1>
        <p class="lead">Write in markdown, search instantly, and keep a full revision trail for reliable collaboration.</p>
    </div>
    <div class="hero-metrics">
        <div><strong>{{ entries|length }}</strong><span>Entries</span></div>
        <div><strong>{{ locked_entries }}</strong><span>Locked</span></div>
    </div>
</section>

{% if not request.user.is_authenticated %}
    <div class="alert-box">Create/Edit requires login. Reading and searching are public.</div>
{% endif %}

<section class="entry-grid">
    {% for entry in entries %}
        <article class="entry-card sleek">
            <h2><a href="{% url 'entry' title=entry %}">{{ entry }}</a></h2>
            <p>Open page, review revisions, and continue editing.</p>
            <a class="card-link" href="{% url 'entry' title=entry %}">Open Page</a>
        </article>
    {% empty %}
        <article class="entry-card sleek">
            <h2>No entries yet</h2>
            <p>Start by creating your first page.</p>
            {% if request.user.is_authenticated %}
                <a class="card-link" href="{% url 'new_page' %}">Create Entry</a>
            {% else %}
                <a class="card-link" href="{% url 'login' %}">Login to Create</a>
            {% endif %}
        </article>
    {% endfor %}
</section>
{% endblock %}
